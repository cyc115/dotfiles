##on work VM

export PATH=/home/lorisadmin/anaconda3/bin:$PATH
alias pcs='phpcs --extensions=php/php,inc/php '
alias pcb='phpcbf --extensions=php/php,inc/php '
#cd to the project file
cd /var/www/loris/


function sqlsource {
         ## automagically drop table if table already exists if matches with Clinical_*.sql and not a meta
         ## file

         if [[ "$1" -eq *.sql ]];
         then
                echo 'match .sql'
         else
                echo 'does not match .sql'
         fi

         
         if [[ "$1" -eq Clinical_* ]];
         then
                echo 'match Clinical_'
         else
                echo 'does not match Clinical_'                
         fi

         
         if [["$1" -neq *_Meta.sql ]];
         then
                echo 'match _Meta.sql'
         else
                echo 'does not match _Meta. sql'
         fi

         
         if [[ "$1" -eq *.sql ]] && [[ "$1" -eq Clinical_* ]] && [["$1" -neq *_Meta.sql ]];
         then
                echo "==== attempt to drop table if exists ==== "
                local tbl_name="$(echo "$1" | cut -d'.' -f 1)"
                mysql -h ace-db-1.cbrain.mcgill.ca -u cyc_admin -pCycHasThisPassword123! --verbose cyc_sandbox -e "drop table if exist $tbl_name ;" 
         fi 

         mysql -h ace-db-1.cbrain.mcgill.ca -u cyc_admin -pCycHasThisPassword123! --verbose cyc_sandbox < $1
}


## set up the tmux windows in the workstation. 
function setup_tmux {
         tmux new-session -d -s default
         tmux new-window -t default:1 -n 'instruments' 'cd /var/www/loris/project/instruments'
         tmux new-window -t default:2 -n 'tables' 'cd /var/www/loris/project/tables_sql'
         tmux new-window -t default:3 -n 'tools' 'cd /var/www/loris/tools'
         tmux new-window -t default:4 -n 'mysql' 'workdb'
         tmux new-window -t default:5 -n 'logs' 'sudo su & /var/log/apache2'
         tmux new-window -t default:6 -n 'term1' 
         tmux new-window -t default:6 -n 'root' 'cd'

         tmux select-window -t default:1
         tmux -2 attach-session -t default
}

##turn on/off frontend debug
function db_debug {
#         echo $1 
         if [ "$13" = "on" ]; then
            echo "turning on"
            rm /var/www/loris/project/config.xml
            cp /var/www/loris/project/config.xml.on /var/www/loris/project/config.xml
         fi
         if [ "$1" = "off" ]; then
            echo "turning off"
            rm /var/www/loris/project/config.xml
            cp /var/www/loris/project/config.xml.off /var/www/loris/project/config.xml
         fi
}



## *Please note that if using this ppa I would *not* try upgrading to 14.10/15.04, ect. Do a fresh install instead. The intent here is just for users wishing to stay on 14.04*

## If upgrading releases anyway use ppa-purge *First* -
## sudo ppa-purge ppa:mc3man/trusty-media

##on system start

#ssh aliases
alias koding='ssh vm-0.iamcyc93826.koding.kd.io'
alias pi='ssh pi@192.168.0.105'
alias school='sshpass -p "rNA8si4J" ssh -o StrictHostKeyChecking=no ychen225@mimi.cs.mcgill.ca'
alias gf='sshpass -p"Ab1*abcde12" ssh -o StrictHostKeyChecking=no guofan@barn.cim.mcgill.ca'
alias vm='ssh -p 3022 127.0.0.1'
#database assignment server
alias db='sshpass -p"cupramen2" ssh -o StrictHostKeyChecking=no cs421g17@comp421.cs.mcgill.ca'
alias workdb='mysql -h ace-db-1.cbrain.mcgill.ca -u cyc_admin -pCycHasThisPassword123! cyc_sandbox'

##directories
alias home='cd $HOME'
alias application='cd $HOME/Application/'
alias dotfile='cd ~/dotfiles'

##application short cuts
alias sl='ls'
alias ls='ls --color=auto -h --group-directories-first -t -r'
alias ws='/application/WebStorm-141.1550/bin/webstorm.sh'
alias src='source $HOME/.bashrc_custom'
alias eclipse='/home/yuechuan/Application/adt-bundle-linux-x86_64-20140321/eclipse/eclipse'
alias studio='/home/yuechuan/Application/android-studio/bin/studio.sh'
alias jdk8='sudo update-java-alternatives -s java-8-oracle'
alias jdk7='sudo update-java-alternatives -s java-7-oracle'
alias idea='/home/yuechuan/Application/idea/bin/idea.sh'
alias sublime='sudo /home/yuechuan/Application/sublime_text_3/sublime_text'
alias matlab='Application/matlab/bin/matlab'
alias egg='bash ~/dotfiles/eggtimer.sh'
alias nw='~/Github/photo-on-map/node_modules/nw/bin/nw'
alias xmind='cd /home/yuechuan/Application/xmind/XMind_Linux_64bit && ./XMind & cd'
alias rs='redshift -O'

alias serverdir='python -m SimpleHTTPServer'
alias vagrant='sudo vagrant'

##mcgill anyConnect vpn
alias vpn='~/Application/anyconnect-4.1.00028/vpn/vpnui &'

##set up quick bashrc
function bashrc {
	em ~/.bashrc_custom
	source ~/.bashrc_custom
        cd $OLDPWD
}

###################
## basic functions
###################

alias ls='ls --color=auto -h --group-directories-first'


#set up node js
export NODE_PATH="/usr/bin/nodejs"
#set up scala 
export SCALA_HOME="/home/yuechuan/Application/scala-2.11.1"
#set up sbt
PATH=$PATH:/home/yuechuan/Application/sbt/bin
#set up node webkit
PATH=$PATH:/home/yuechuan/Application/nwjs
#add application folder to path
PATH=$PATH:/home/yuechuan/Application

#add go to path
alias docs='cd $HOME/Dropbox/mcgill\ y4/'

##application short cuts
alias ws='/application/WebStorm-141.1550/bin/webstorm.sh'
alias src='source $HOME/.bashrc_custom'
alias eclipse='/home/yuechuan/Application/adt-bundle-linux-x86_64-20140321/eclipse/eclipse'
alias studio='/home/yuechuan/Application/android-studio/bin/studio.sh'
alias jdk8='sudo update-java-alternatives -s java-8-oracle'
alias jdk7='sudo update-java-alternatives -s java-7-oracle'
alias idea='/home/yuechuan/Application/idea/bin/idea.sh'
alias sublime='sudo /home/yuechuan/Application/sublime_text_3/sublime_text'
alias matlab='Application/matlab/bin/matlab'
alias egg='bash ~/dotfiles/eggtimer.sh'
alias nw='~/Github/photo-on-map/node_modules/nw/bin/nw'
alias xmind='cd /home/yuechuan/Application/xmind/XMind_Linux_64bit && ./XMind & cd'
alias rs='redshift -O'
alias folder='nautilus . &'

alias em='emacs -nw'     # No X11 windows
alias eqq='emacs -nw -Q' # No config and no X11



alias serverdir='python -m SimpleHTTPServer'

#mcgill anyConnect vpn
alias vpn='~/Application/anyconnect-4.1.00028/vpn/vpnui &'


# perma alias:
# quickly append expressions to bashrc.
function quickrc {
         if [ "$#" -ne 1 ]; then
            echo "One expression is needed as argument to be concatinated to .bashrc_custom"
         else
            echo "$1" >> ~/.bashrc_custom
            source ~/.bashrc_custom
            cd $OLDPWD
         fi
}



###################
## basic functions
###################

alias ls='ls --color=auto -h --group-directories-first'


#set up node js
export NODE_PATH="/usr/bin/nodejs"
#set up scala 
export SCALA_HOME="/home/yuechuan/Application/scala-2.11.1"
#set up sbt
PATH=$PATH:/home/yuechuan/Application/sbt/bin
#set up node webkit
PATH=$PATH:/home/yuechuan/Application/nwjs
#add application folder to path
PATH=$PATH:/home/yuechuan/Application

#add go to path
export GOROOT=/usr/lib/go
export GOPATH=/home/yuechuan/Github/FirefighterTracking/prototype/server
export GOPATH=$GOPATH:/home/yuechuan/Github/FirefighterTracking/prototype/videoserver
#PATH=$PATH:$GOROOT/bin

#function to set current dir as GOPATH
function gopath
{
export GOPATH=`pwd`
}

function goinit
{
mkdir bin pkg src
}

#android stuff
PATH=$PATH:/home/yuechuan/Application/android-sdk-linux/tools
PATH=$PATH:/home/yuechuan/Application/android-sdk-linux/platform-tools
#mysql
PATH=$PATH:/home/yuechuan/Application/mysql-5.6.26-linux-glibc2.5-x86_64/bin


#scripts that I have made will
export PATH=$PATH:/home/yuechuan/Documents/myscript

#set up lang var
export LANG="en_CA.UTF-8"
export LC_ALL="en_CA.UTF-8"
PATH=$PATH:~/dotfiles/bin


#emacs
alias em='emacs -nw'

#set up TESSERACT PDF OCR variable
TESSDATA_PREFIX=/home/yuechuan/Application/tesseract-ocr/


#Jekyll alias
alias jk=jekyll

############################
##additional functionalities
############################

function webscrap {
wget \
     --recursive \
          --no-clobber \
	       --page-requisites \
			--accept $2 \
		         --convert-links \
			      --restrict-file-names=windows \
				        --no-parent \
					         $1
}

function parse {
   cd /var/www/loris/tools
   ls /var/www/loris/project/instruments/*$1* | php ./quickform_parser.php
   cd $OLDPWD
}

function gtbl {
   cd /var/www/loris/tools
   ls /var/www/loris/project/instruments/*$1* | php ./generate_tables_sql.php
   cd $OLDPWD
}

function ptbl {
         parse $1
         gtbl $1
         mv /var/www/loris/project/tables_sql/Clinical_* /var/www/loris/project/tables_sql/Clinical/
         mv /var/www/loris/project/tables_sql/General_Health_* /var/www/loris/project/tables_sql/Clinical/
         mv /var/www/loris/project/tables_sql/Screening_* /var/www/loris/project/tables_sql/Screening/
}

alias gbranch="git for-each-ref --sort=committerdate refs/heads/ --format='%(HEAD) %(color:yellow)%(refname:short)%(color:reset) - %(color:red)%(objectname:short)%(color:reset) - %(contents:subject) - %(authorname) (%(color:green)%(committerdate:relative)%(color:reset))'"
alias srcrc="source ~/.bashrc_custom && cd $OLDPWD && echo 'bashrc sourced'"
alias gcmb="git checkout master && git checkout -b "
alias gdiff='git diff'
alias em='emacs -nw'
